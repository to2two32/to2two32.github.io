<script>
/* Variable initialisation */
var classeDuLienSDmooth = "a.lienSmooth";
var dureeDuSmooth = 800; 

var navHeight = $("nav ul").height();
var hauteurFenetre = $(window).height();
var hauteurDocument = $(document).height();
var navigation = $("nav#top ul"); 
var navOffsetTop = $("nav#top ul").offset().top;
var returnTop = $("#returntop");

var stick = "stick";
var unstick = "unstick";
var active = "active";

/* SmoothScroll */

$(window).scroll(function() {
  var scrollPosition = $(window).scrollTop();
  /* Sticky menu */
  if (scrollPosition >= navOffsetTop) { 
    navigation.removeClass(unstick);
    navigation.addClass(stick);
    returnTop.fadeIn();
  } 
  else {
    navigation.removeClass(stick);
    navigation.addClass(unstick);
    returnTop.fadeOut();
  } 
 
  $(".ancre").each(function(){
    var ancrePositionId = "#"+$(this).attr("id");
    var ancrePosition = $(ancrePositionId).offset().top;
    if(scrollPosition >= (ancrePosition - navHeight)) {
      $("#top li a").removeClass(active); 
      $("a[href=\""+ancrePositionId+"\"]").addClass(active)
    }
    else if ((scrollPosition+hauteurFenetre) == hauteurDocument){
      $("#top li a").removeClass(active); 
      $("a[href=\""+ancrePositionId+"\"]").addClass(active)      
    }
    else {
      $("a[href=\""+ancrePositionId+"\"]").removeClass(active); 
    }
  }); 
});
</script>